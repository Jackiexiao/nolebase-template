---
share: "true"
---

![](../../img/Pasted%20image%2020251113134616.png)

# 解压缩流

![](../../img/Pasted%20image%2020251113134638.png)

```Java
public class IODemo33 {
    public static void main(String[] args) throws IOException {
        File src = new File("F:\\test\\img.zip");
        File dest = new File("F:\\test\\");

        unZip(src,dest);
    }

    private static void unZip(File src, File dest) throws IOException {
        ZipInputStream zis = new ZipInputStream(new FileInputStream(src));
        ZipEntry nextEntry;
        while ((nextEntry = zis.getNextEntry()) != null) {
            if (nextEntry.isDirectory()) {
                File dir = new File(dest,nextEntry.toString());
                dir.mkdirs();
            }else {
                FileOutputStream fos = new FileOutputStream(
                        new File(dest,nextEntry.toString()));
                byte[] bytes = new byte[1024*1024*8];
                int len;
                while ((len = zis.read(bytes)) != -1) {
                    fos.write(bytes,0,len);
                }
                fos.close();
            }
        }
        zis.close();
    }
}
```

# 压缩流

![](../../img/Pasted%20image%2020251113154544.png)

## 压缩单个文件

```Java
public class IODemo34 {
    public static void main(String[] args) throws IOException {
        File src = new File("F:\\test\\pintu.jpg");
        File dest = new File("F:\\test\\");

        toZip(src,dest);
    }

    public static void toZip(File src, File dest) throws IOException {
        //创建压缩流关联压缩包copy.zip
        ZipOutputStream zos = new ZipOutputStream(
                new FileOutputStream(new File(dest,"copy.zip")));
        //创建ZipEntry对象，表示压缩包里的每一个文件和文件夹
        //参数也表示压缩包里的路径
        ZipEntry zipEntry = new ZipEntry("pintu.jpg");
        //将ZipEntry对象添加到压缩流中
        zos.putNextEntry(zipEntry);

        //创建文件输出流
        FileInputStream fis = new FileInputStream(src);
        byte[] bytes = new byte[1024*1024*8];
        int len;
        while ((len = fis.read(bytes)) !=-1) {
            zos.write(bytes,0,len);
        }
        //关闭流
        fis.close();
        //关闭压缩流
        zos.closeEntry();
        zos.close();
    }
}
```

## 压缩文件夹

```Java
public class IODemo35 {
    public static void main(String[] args) throws IOException {
        File src = new File("F:\\test");
        File getParent = src.getParentFile();
        File dest = new File(getParent, src.getName() + ".zip");
        //创建压缩流关联压缩包
        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(dest));
        toZip(src, zos, src.getName());
        //关闭压缩流
        zos.close();
    }

    /*
     * 作用：将src里的每一个文件，变成ZipEntry对象，放到压缩包中
     * 参数：
     *   参数一：src要压缩的文件或文件夹
     *   参数二：zos 压缩流
     *   参数三：压缩包内部的路径
     * */    public static void toZip(File src, ZipOutputStream zos, String name) throws IOException {
        //进入src
        File[] files = src.listFiles();
        for (File file : files) {
            //判断是文件还是文件夹
            if (file.isFile()) {
                //创建ZipEntry对象
                ZipEntry zipEntry = new ZipEntry(name + "\\" + file.getName());
                //将ZipEntry对象添加到压缩流中
                zos.putNextEntry(zipEntry);
                //创建文件输入流
                FileInputStream fis = new FileInputStream(file);
                byte[] bytes = new byte[1024 * 1024 * 8];
                int len;
                while ((len = fis.read(bytes)) != -1) {
                    zos.write(bytes, 0, len);
                }
            } else {
                //递归调用
                toZip(file, zos, name + "\\" + file.getName());
            }
        }
    }
}
```
