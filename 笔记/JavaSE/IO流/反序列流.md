---
share: "true"
---

![](../../img/Pasted%20image%2020251111082833.png)

```txt
Exception in thread "main" java.io.InvalidClassException: javaStudy.MyIO.Student; local class incompatible: stream classdesc serialVersionUID = -2415473593187730659, local class serialVersionUID = 5222658841541014156
```

![](../../img/Pasted%20image%2020251111084122.png)
固定版本号对象可以解决这个问题

```Java
@Serial
private static final long serialVersionUID = -2415473593187730659L;
private String name;
private int age;
private String address;
```

## 自动上成版本号

![](../../img/Pasted%20image%2020251111085232.png)

# transient

- 不会把当前属性序列化到文件中

```Java
private transient String address;
```

![](../../img/Pasted%20image%2020251111090805.png)

# 一次读取多个数据

- 方法一：

```Java
ObjectInputStream ois = new ObjectInputStream(new FileInputStream("src/javaStudy/MyIO/d.txt"));
Student stu1 = (Student) ois.readObject();
Student stu2 = (Student) ois.readObject();
Student stu3 = (Student) ois.readObject();
System.out.println(stu1);
System.out.println(stu2);
System.out.println(stu3);
ois.close();
```

- 方法二：

```Java
public class IODemo28 {
    public static void main(String[] args) throws IOException {
        ArrayList<Student> list = new ArrayList<>();
        Collections.addAll(list,
                new Student("张三", 18, "北京"),
                new Student("李四", 19, "上海"),
                new Student("王五", 20, "广州"));
        ObjectOutputStream oos = new ObjectOutputStream(
                new FileOutputStream("src/javaStudy/MyIO/d.txt"));
        oos.writeObject(list);
        oos.close();
    }
}

public class IODemo29 {
    public static void main(String[] args) throws IOException, ClassNotFoundException {
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("src/javaStudy/MyIO/d.txt"));
        ArrayList<Student> students = (ArrayList<Student>) ois.readObject();
        for (Student student : students) {
            System.out.println(student);
        }
        ois.close();
    }
}
```
